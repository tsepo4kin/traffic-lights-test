(function(t){function e(e){for(var n,l,a=e[0],c=e[1],s=e[2],f=0,h=[];f<a.length;f++)l=a[f],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&h.push(o[l][0]),o[l]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(h.length)h.shift()();return i.push.apply(i,s||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],n=!0,a=1;a<r.length;a++){var c=r[a];0!==o[c]&&(n=!1)}n&&(i.splice(e--,1),t=l(l.s=r[0]))}return t}var n={},o={app:0},i=[];function l(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=t,l.c=n,l.d=function(t,e,r){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)l.d(r,n,function(e){return t[e]}.bind(null,n));return r},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/traffic-lights-test/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var s=0;s<a.length;s++)e(a[s]);var u=c;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},3599:function(t,e,r){"use strict";r("e468")},"53d1":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("trafficLights",{attrs:{colorStart:t.startColor,startTime:t.startTime},on:{timer:t.timerHandler}}),r("timer",{attrs:{time:t.leftTime}})],1)},i=[],l=r("b85c"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"TrafficLights"},t._l(t.calcColors,(function(e,n){return r("light",{key:n,attrs:{color:e,blinking:t.blinking[n],defaultColor:t.defaultColors[n]}})})),1)},c=[],s=r("d4ec"),u=r("1da1"),f=(r("96cf"),r("a9e3"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"color",style:{"background-color":t.blinkingColor||t.color}})}),h=[],p={props:{color:{type:String},blinking:{type:Boolean},defaultColor:{type:String}},data:function(){return{blinkingColor:null,interval:null}},watch:{blinking:function(t){var e=this,r=450;t&&this.color!=this.defaultColor?this.interval=setInterval((function(){e.blinkingColor==e.color?e.blinkingColor=e.defaultColor:e.blinkingColor=e.color}),r):(this.blinkingColor=null,clearInterval(this.interval))}},beforeDestroy:function(){clearInterval(this.interval)}},d=p,m=(r("3599"),r("2877")),g=Object(m["a"])(d,f,h,!1,null,null,null),v=g.exports,b={name:"TrafficLights",components:{Light:v},props:{colorStart:{require:!0},startTime:{type:Number}},data:function(){return{defaultColors:["#3c0000","#3c3c00","#003c00"],color:null,time:null,interval:null,blinking:[!1,!1,!1],pattern:null}},watch:{colorStart:function(t){"string"==typeof t&&(this.color=t)}},computed:{calcColors:function(){var t,e=[],r=Object(l["a"])(this.defaultColors);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n)}}catch(o){r.e(o)}finally{r.f()}return"red"==this.color?e[0]=this.color:"yellow"==this.color?e[1]=this.color:"green"==this.color&&(e[2]=this.color),e}},methods:{changeColors:function(t,e){var r=this,n=1e3;clearInterval(this.interval),this.time=0,e(t),this.$route.path!==t.path&&this.$router.push(t.path),setTimeout((function(){r.changeColors(t.next,e)}),t.time*n),this.time--,this.$emit("timer",this.time),this.interval=setInterval((function(){r.time--,r.checkBlinking(),r.$emit("timer",r.time)}),n)},setLocalstorage:function(){localStorage.setItem("trafficLight",JSON.stringify({pattern:this.pattern,time:this.time}))},checkBlinking:function(){this.time<=3&&"yellow"!=this.color?("red"==this.color&&(this.blinking=[!0,!1,!1]),"green"==this.color&&(this.blinking=[!1,!1,!0])):this.blinking=[!1,!1,!1]}},mounted:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var r,n,o,i,a,c,u,f,h,p,d,m,g,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function t(e,r,n,o){Object(s["a"])(this,t),this.color=e,this.time=r,this.next=o,this.path=n},n=new r("red",10,"/red"),o=new r("yellow",3,"/yellow"),i=new r("green",15,"/green"),a=new r("yellow",3,"/yellow"),n.next=o,o.next=i,i.next=a,a.next=n,c=[n,o,i],u=function(e){t.time=e.time+1,t.color=e.color,t.pattern={color:e.color,nextColor:e.next.color},t.$route.path!=e.path&&t.$router.push(e.path)},window.addEventListener("beforeunload",t.setLocalstorage),e.next=14,t.$nextTick();case 14:if(t.startTime){h=Object(l["a"])(c);try{for(h.s();!(p=h.n()).done;)d=p.value,d.color==t.colorStart.color&&d.next.color==t.colorStart.nextColor&&(f=new r(d.color,t.startTime,d.path,d.next))}catch(b){h.e(b)}finally{h.f()}t.changeColors(f,u)}else{m=Object(l["a"])(c);try{for(m.s();!(g=m.n()).done;)v=g.value,t.colorStart==v.color&&t.changeColors(v,u)}catch(b){m.e(b)}finally{m.f()}}case 15:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){clearInterval(this.interval),window.removeEventListener("beforeunload",this.setLocalstorage)}},y=b,w=(r("ea4d"),Object(m["a"])(y,a,c,!1,null,null,null)),C=w.exports,k=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"timer"},[t._v(" "+t._s(t.time)+" ")])},x=[],O={name:"Timer",props:{time:{require:!0}}},T=O,j=(r("6e19"),Object(m["a"])(T,k,x,!1,null,"23fb5994",null)),S=j.exports,_={components:{Timer:S,TrafficLights:C},data:function(){return{startColor:null,startTime:null,leftTime:null}},methods:{timerHandler:function(t){this.leftTime=t}},mounted:function(){var t,e=["/yellow","/green","/red","/"],r=localStorage.getItem("trafficLight")?JSON.parse(localStorage.getItem("trafficLight")):null;if(null!=(null===r||void 0===r?void 0:r.pattern)&&"/"+(null===(t=r.pattern)||void 0===t?void 0:t.color)==this.$route.path||"/"==this.$route.path&&null!=(null===r||void 0===r?void 0:r.pattern))this.startColor=r.pattern,this.startTime=r.time;else{var n,o=Object(l["a"])(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(this.$route.path===i){if("/"!=i){this.startColor=i.substring(1);break}this.startColor="red"}}}catch(a){o.e(a)}finally{o.f()}}}},L=_,$=Object(m["a"])(L,o,i,!1,null,null,null),I=$.exports,P=r("8c4f");n["a"].use(P["a"]);var E=[{path:"/:LightColor",name:"TrafficLights",component:C}],J=new P["a"]({mode:"history",base:"/traffic-lights-test/",routes:E}),M=J;n["a"].config.productionTip=!1,new n["a"]({router:M,render:function(t){return t(I)}}).$mount("#app")},"5fdf":function(t,e,r){},"6e19":function(t,e,r){"use strict";r("53d1")},e468:function(t,e,r){},ea4d:function(t,e,r){"use strict";r("5fdf")}});
//# sourceMappingURL=app.0aac3b92.js.map